<Window x:Class="CameraControl.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:myclass="clr-namespace:CameraControl.Classes"
        Title="Nikon Camera Control" Height="576" Width="1067" Loaded="Window_Loaded" xmlns:my="clr-namespace:CameraControl">
    <Window.Resources>
        <Style TargetType="{x:Type ListBox}">
            <!-- Set the ItemTemplate of the ListBox to a DataTemplate which
           explains how to display an object of type BitmapImage. -->
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <StackPanel>
                        <Border BorderBrush="Black" BorderThickness="2" CornerRadius="5" Margin="6" >
                                <Image Source="{Binding Path=Thumbnail}" Stretch="Uniform" Width="120" Height="80"  />
                        </Border>
                            <Label Content="{Binding Path=Name}" HorizontalAlignment="Center" />
                        </StackPanel>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
           
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Window.DataContext>
        <myclass:Settings/>
    </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="161" />
            <ColumnDefinition Width="663*" />
            <ColumnDefinition Width="95" />
            <ColumnDefinition Width="126" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="54" />
            <RowDefinition Height="324*" />
            <RowDefinition Height="136" />
            <RowDefinition Height="23" />
        </Grid.RowDefinitions>
        <my:Controler x:Name="controler1" Grid.Row="1" IsEnabled="{Binding Path=Manager.IsConected}" Grid.RowSpan="3" />
        <StackPanel Grid.Column="1">
            <StackPanel  Orientation="Horizontal">
                <Label Content="Manufacturer :" />
                <Label Content="{Binding Path=Manager.Manufacturer}" />
            </StackPanel>
            <StackPanel  Orientation="Horizontal">
                <Label Content="Model :" />
                <Label Content="{Binding Path=Manager.DeviceName}" />
            </StackPanel>
        </StackPanel>
        <Button Content="Take picture" Name="button3" Click="button3_Click" IsEnabled="{Binding Path=Manager.IsConected}"/>
        <Border BorderBrush="Black" BorderThickness="2" CornerRadius="5" Margin="0" Grid.Column="1" Grid.Row="1">
            <Image Grid.Row="1" Name="image1" Stretch="Uniform"  />
        </Border>
        <Label Content="Loading ..." Name="lbl_loading" Grid.Column="1" Grid.Row="1" Margin="0,2,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" Visibility="{Binding Path=ImageLoading}" FontSize="25" FontWeight="ExtraBold">
            <Label.Foreground>
                <RadialGradientBrush>
                    <GradientStop Color="Black" Offset="0" />
                    <GradientStop Color="White" Offset="1" />
                </RadialGradientBrush>
            </Label.Foreground>
        </Label>
        <StackPanel Grid.Column="2" Name="SessionPanel" Grid.ColumnSpan="2" >
            <StackPanel  Orientation="Horizontal">
                <ComboBox  Name="cmb_session" SelectedValue="{Binding Path=DefaultSession}" ItemsSource="{Binding Path=PhotoSessions}" Width="183"  Margin="3"/>
                <Button Content="Add" Grid.Column="3" Name="btn_add_Sesion" Margin="3" Click="btn_add_Sesion_Click" />
                <Button Content="Edit" Grid.Column="3" Name="btn_edit_Sesion" Margin="3" Click="btn_edit_Sesion_Click" />
            </StackPanel>
            <StackPanel  Orientation="Horizontal">
            </StackPanel>
        </StackPanel>
        <StackPanel Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="3" Name="ImagePanel"  Grid.RowSpan="2" >
            <ListBox  Name="ImageLIst" ItemsSource="{Binding Path=DefaultSession.Files}" SelectionChanged="ImageLIst_SelectionChanged" />
        </StackPanel>
    </Grid>
</Window>
